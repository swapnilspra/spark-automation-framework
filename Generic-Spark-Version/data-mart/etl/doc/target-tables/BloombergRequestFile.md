# Bloomberg Request File

### Header Record - Static

	START-OF-FILE
	FIRMNAME=dl783239
	FILETYPE=pc
	REPLYFILENAME=BB_COUNTRY_THRESHOLD
	RUNDATE= <date "+%Y%m%d">
	CLOSINGVALUES=yes
	COLUMNHEADER=yes
	DERIVED=yes
	HISTORICAL=yes
	SECMASTER=yes
	PROGRAMNAME=getdata

	# Build Code: 000000000000000001

	START-OF-FIELDS
	ID_BB_COMPANY
	ISSUER|180||
	ISSUER_BULK|180||
	ID_BB_GLOBAL_COMPANY_NAME|180||
	ID_CUSIP
	ID_SEDOL1
	EQY_SH_OUT_REAL
	ID_ISIN
	EQY_SH_OUT_TOT_MULT_SH
	TOTAL_VOTING_SHARES_VALUE
	TOTAL_NON_VOTING_SHARES_VALUE
	VOTING_RIGHTS
	VOTING_RIGHTS_DES
	SEDOL1_COUNTRY_ISO
	CNTRY_ISSUE_ISO
	CNTRY_OF_INCORPORATION
	ADR_SPONSORSHIP_TYP
	CUR_MKT_CAP
	END-OF-FIELDS

	START-OF-DATA
	#COMMENT_FIELD|REPORTING_DATE

--

### Request Body

	#START SECURITY|<date "mm/dd/yyyy">
	 IF(NOT ISNULL(file.SEDOL_ID) then file.SEDOL_ID else file.ISIN_ID) || ' Corp|' || IF(NOT ISNULL(file.SEDOL_ID) then 'SEDOL' else 'ISIN'))||CHR(13)||CHR(10)
	#END SECURITY||CHR(13)||CHR(10)

### Request Trailer

END-OF-DATA
END-OF-FILE


File used :

HARBCUST.txt 

Location Fileproc S3 bucket

Frequency: Daily

Logic : From the HARBCUST file only take Unique records where 

		ASSET_GRP_CD = 'S' AND
		(
		(ALT_ASSET_ID_TYPE_CD1='SDL' OR ALT_ASSET_ID_TYPE_CD1 = 'ISN' 
		) OR
		(ALT_ASSET_ID_TYPE_CD2='SDL' OR ALT_ASSET_ID_TYPE_CD2 = 'ISN'
		 )
		)

Example of the body:
		
		#START SECURITY|04/28/2020
		0267043 Corp|SEDOL
		#END SECURITY

